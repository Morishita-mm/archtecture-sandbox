# ==============================================================================
# Development Status Update
# ==============================================================================
# 最終更新: 2025-12-10
# 更新内容: UI/UX刷新、ヘルプ機能実装、評価ロジックの改善、各種バグ修正
# ==============================================================================

project_status:
  phase: "UI/UX Refinement & Usability Polish"
  latest_milestone: "Help System & Rich UI Implementation"

# ------------------------------------------------------------------------------
# Updated Operational Details (動作仕様の更新)
# ------------------------------------------------------------------------------
operational_details:
  ui_flow_update:
    description: "トップ画面で「新規開始」か「続きから再開」を選択可能なフローに変更"
    steps:
      - "ENTRY_SCREEN":
          action: "ユーザーは「シナリオカード選択」または「既存プロジェクト読み込み」を行う"
          component: "ScenarioSelectionScreen.tsx"
          updates: "リッチフォント(Montserrat)適用、フッター(GitHub/Qiitaリンク)追加、ヘルプボタン設置"
      - "LOAD_FLOW":
          trigger: "「既存プロジェクトを読み込む」ボタン（ホバーエフェクト付）"
          process: "JSONファイル選択 -> Base64デコード -> 構造/バージョン検証 -> 状態復元"
          restore_target: "チャット履歴, ノード/エッジ, メモ, AI評価結果"
      - "SAVE_FLOW":
          trigger: "キャンバス画面右上の保存ボタン"
          process: "全StateをJSON化 -> Base64エンコード -> ファイル出力"
          naming_convention: "<シナリオ名>_v<バージョン>.json"
          version_control: "保存実行後、内部バージョンを自動インクリメント (例: 1.0 -> 2.0)"

  new_features:
    - name: "ローカルデータ永続化"
      status: "Implemented"
      details:
        method: "Client-side JSON File Download/Upload"
        security: "Base64 Obfuscation (システムプロンプト隠蔽のため)"
        scope: "Full State Persistence (Diagram, Chat, Memo, Evaluation Result)"

    - name: "操作ガイド（ヘルプシステム）"
      status: "Implemented"
      details:
        component: "HelpModal.tsx"
        features: "タブ切り替え式(基本フロー/操作/AIコツ/評価)、React Iconsによる視覚化"
        access: "ウェルカム画面およびキャンバスヘッダーから常時アクセス可能"

    - name: "プロパティパネルのドラッグ移動"
      status: "Implemented"
      details:
        logic: "親要素基準の相対座標計算によるスムーズなドラッグ＆ドロップ実装"

# ------------------------------------------------------------------------------
# Recent Changes (直近の変更点)
# ------------------------------------------------------------------------------
recent_changes:
  # --- Logic / Backend Integration ---
  - id: feat_evaluation_context
    category: "Logic"
    description: "AI評価リクエスト時に、コンポーネントの種類だけでなく「ユーザー定義名(label)」と「詳細メモ(description)」を含めるよう修正。AIの評価精度向上"

  - id: fix_color_sync
    category: "Logic"
    description: "architecture_defs.json の定義と nodeStyles.ts のキー不一致を解消し、コンポーネントの色が正しく反映されない問題を修正"

  - id: feat_dynamic_styles
    category: "Refactor"
    description: "コンポーネントの配色をハードコードから architecture_defs.json を参照する動的生成に変更。定義ファイルの一元管理化"

  # --- UI / UX Improvements ---
  - id: ux_header_refactor
    category: "Refactor"
    description: "ArchitectureCanvasからヘッダー部分を Header.tsx として分離。共通デザイン化と保守性向上"

  - id: ux_rich_welcome
    category: "UI/UX"
    description: "ウェルカム画面のデザイン刷新。Google Fonts(Montserrat)の導入、タイトル装飾、フッターエリア(GitHub/Qiita)の追加"

  - id: ux_node_handles
    category: "UI/UX"
    description: "CustomNodeの接続ポイント(Handle)を整理。左右の未使用ハンドルを削除し、上下のみに限定して誤操作を防止"

  - id: ux_eval_panel_layout
    category: "UI/UX"
    description: "評価パネルの下部パディングを調整し、スクロール時にコンテンツが見切れる問題を解消"

  - id: ux_local_asset
    category: "Asset"
    description: "Qiitaアイコンなどの外部リソースをローカルアセットとして配置し、リンク切れリスクとパフォーマンスを改善"

  # --- Previous Changes (Archive) ---
  - id: feat_local_persistence
    category: "Feature"
    description: "RDSを使用せず、ローカルファイル(JSON)によるデータの完全な保存・復元機能を実装"
  - id: feat_versioning
    category: "Logic"
    description: "保存ファイル名にバージョンを含め、読み込み→保存のサイクルでバージョンを自動更新するロジックを追加"

# ------------------------------------------------------------------------------
# Updated Limitations (制約事項の更新)
# ------------------------------------------------------------------------------
limitations_update:
  - name: "データ共有"
    status: "Manual"
    detail: "サーバーに保存しないため、他者への共有はJSONファイルの送付が必要"
